(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6967:function(e,a,s){Promise.resolve().then(s.bind(s,7961))},7961:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return _}});var n=s(3827),t=s(4090),c=s(3401),r=s.n(c);s(4199);var i=function(e){let{currentQuestion:a,setCurrentQuestion:s,onSearchButtonClick:c,messages:i}=e,[o,l]=(0,t.useState)(!1);async function h(){""!==a.trim()&&(l(!0),c(a),s(""))}return(0,t.useEffect)(()=>{o&&setTimeout(()=>l(!1),2e3)},[o]),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:r().chatContainer,children:(0,n.jsxs)("div",{className:r().messageContainer,children:[i.map((e,a)=>(0,n.jsxs)("div",{className:"".concat(r().message," ").concat("user"===e.role?r().userMessage:r().assistantMessage),children:[(0,n.jsxs)("span",{className:r().role,children:[e.role," : "]}),Array.isArray(e.content)?e.content.join(""):e.content]},a)),o&&(0,n.jsx)("div",{className:r().loadingIndicator,children:"Loading......"})]})}),(0,n.jsxs)("div",{className:r().searchContainer,children:[(0,n.jsx)("input",{type:"text",placeholder:"Ask a question ...",className:r().chatInput,value:a,onChange:function(e){s(e.target.value)},onKeyDown:e=>{"Enter"===e.key&&h()}}),(0,n.jsx)("button",{className:r().searchButton,onClick:h,children:(0,n.jsx)("svg",{className:r().sendIcon,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:(0,n.jsx)("path",{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"})})})]})]})},o=s(1507),l=s.n(o),h=()=>(0,n.jsxs)("div",{className:r().stickyHeader,children:[(0,n.jsxs)("nav",{className:r().navbarLeft,children:[(0,n.jsx)("img",{src:"/taxsavvy.png",alt:"Logo",className:r().logo}),(0,n.jsx)("ul",{className:r().navbarList,children:(0,n.jsx)("li",{className:r().navbarItem,children:(0,n.jsx)("a",{href:"#",className:r().navbarLink,children:"For Business"})})})]}),(0,n.jsx)("h1",{className:r().header,children:"TaxSavy"}),(0,n.jsx)("nav",{className:r().navbarRight,children:(0,n.jsx)("ul",{className:r().navbarList,children:(0,n.jsx)("li",{className:r().navbarItem,children:(0,n.jsx)("a",{href:"#",className:r().navbarLink,children:"Sign up"})})})})]});function _(){let[e,a]=(0,t.useState)([]),[s,c]=(0,t.useState)(""),r=async()=>{let n=[...e,{role:"user",content:s}];await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:n})}).then(e=>{if(e.body){let s=e.body.getReader(),t="";new ReadableStream({async start(e){for(;;){let{done:c,value:r}=await s.read();if(c)break;let i=new TextDecoder().decode(r);a([...n,{role:"assistant",content:t+=i}]),e.enqueue(r)}e.close(),s.releaseLock()}})}})};return(0,n.jsxs)("div",{children:[" ",(0,n.jsx)(h,{}),(0,n.jsx)("main",{className:l().mainContainer,children:(0,n.jsx)(i,{onSearchButtonClick:()=>{console.log("Search button clicked with question:",s),r()},currentQuestion:s,setCurrentQuestion:c,messages:e})})]})}},4199:function(){},1507:function(e){e.exports={mainContainer:"chatpage_mainContainer__K8Xf1"}},3401:function(e){e.exports={header:"chat_header__wuZ5B",stickyHeader:"chat_stickyHeader__lC8kz",navbarItem:"chat_navbarItem__7Mno7",navbarLeft:"chat_navbarLeft__3ymjH",navbarRight:"chat_navbarRight__9rJr7",navbarLink:"chat_navbarLink__5hFc8",logo:"chat_logo__rTzV1",role:"chat_role__yNZ_B",chatContainer:"chat_chatContainer__EcwHF",messageContainer:"chat_messageContainer__48vOm",message:"chat_message__iGHuv",userMessage:"chat_userMessage__feyiO",assistantMessage:"chat_assistantMessage__b3VOX",searchContainer:"chat_searchContainer__xuDnr",chatInput:"chat_chatInput__DdfNf",searchButton:"chat_searchButton__qO_9E",sendIcon:"chat_sendIcon__sCs_z"}}},function(e){e.O(0,[971,69,744],function(){return e(e.s=6967)}),_N_E=e.O()}]);